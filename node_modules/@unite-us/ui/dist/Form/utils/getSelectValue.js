"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _lodash = _interopRequireDefault(require("lodash"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function recursiveSearch(value, valueKey, options) {
  var selectedOption = _lodash["default"].reduce(options, function (acc, option) {
    var result;

    if (_lodash["default"].has(option, 'children') && !_lodash["default"].isEmpty(option.children)) {
      result = recursiveSearch(value, valueKey, option.children);
    }

    if (result === undefined && _lodash["default"].get(option, valueKey, null) === value.value) {
      result = option;
    }

    return result === undefined ? acc : result;
  }, undefined);

  return selectedOption;
}

function getSelectValue(value) {
  var valueKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'value';
  var options = arguments.length > 2 ? arguments[2] : undefined;
  var forceObjectValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

  if (!value) {
    return '';
  }

  if (valueKey === 'value' && !forceObjectValue) {
    if (_lodash["default"].isArray(value)) {
      return _lodash["default"].map(value, 'value');
    }

    return value.value;
  }

  if (_lodash["default"].isArray(value)) {
    return _lodash["default"].map(value, function (val) {
      return recursiveSearch(val, valueKey, options);
    });
  }

  return recursiveSearch(value, valueKey, options);
}

var _default = getSelectValue;
exports["default"] = _default;