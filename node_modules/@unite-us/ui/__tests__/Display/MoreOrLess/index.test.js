import React from 'react';
import { mount } from 'enzyme';
import MoreOrLess from 'components/Display/MoreOrLess';

const ChildComp = ({ showMore }) => (
  <div>
    <p>I m always visible</p>
    {showMore && <p>I m only visible in showmore</p>}
  </div>
);

describe('MoreOrLess', () => {
  it('renders', () => {
    const comp = mount(<MoreOrLess><ChildComp /></MoreOrLess>);

    expect(comp.find('ChildComp')).toHaveLength(1);
    expect(comp.find('Button#more-or-less-toggle-btn')).toHaveLength(1);
  });

  it('toggles the conditionnal content', () => {
    const comp = mount(<MoreOrLess><ChildComp /></MoreOrLess>);

    expect(comp.find('p')).toHaveLength(1);

    const button = comp.find('button#more-or-less-toggle-btn');
    button.simulate('click');

    expect(comp.find('p')).toHaveLength(2);
  });
});
