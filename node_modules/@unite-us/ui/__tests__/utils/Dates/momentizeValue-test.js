import moment from 'moment';
import { momentizeValue } from '../../../src/components/utils/Dates';

describe('momentizeValue', () => {
  it('returns null for null or empty value', () => {
    expect(momentizeValue()).toBeNull();
    expect(momentizeValue('')).toBeNull();
  });

  it('converts a unix timestamp', () => {
    const timestamp = moment().unix().toString();
    const date = momentizeValue(timestamp);
    expect(date instanceof moment).toBeTruthy();
    expect(date.format('YYYY-MM-DD')).toBe(moment().format('YYYY-MM-DD'));
  });

  it('converts a string with format', () => {
    const date = momentizeValue('2017-11-01', 'YYYY-MM-DD');
    expect(date instanceof moment).toBeTruthy();
    expect(date.format('YYYY-MM-DD')).toBe('2017-11-01');
  });

  it('converts a js Date', () => {
    const value = new Date(2011, 9, 16);
    const date = momentizeValue(value);
    expect(date instanceof moment).toBeTruthy();
    expect(date.format('YYYY-MM-DD')).toBe('2011-10-16');
  });

  it('converts a moment object', () => {
    const date = momentizeValue(moment({ year: 2017, month: 10, day: 1 }));
    expect(date instanceof moment).toBeTruthy();
    expect(date.format('YYYY-MM-DD')).toBe('2017-11-01');
  });

  it('converts to UTC', () => {
    const date = momentizeValue('2017-11-01', 'YYYY-MM-DD', true);
    expect(date instanceof moment).toBeTruthy();
    expect(date.isUtc()).toBeTruthy();
  });
});
