import React from 'react';
import { getPropagationPath } from 'components/utils/Browser';

describe('getPropagationPath', () => {
  it('accepts an undefined event', () => {
    expect(getPropagationPath(undefined)).toBeNull();
  });

  it('return the event path', () => {
    const event = {
      path: [
        'dom element 1',
        'dom element 2',
        'dom element 3',
        'dom element 4',
      ],
    };

    expect(getPropagationPath(event)).toHaveLength(4);
  });

  it('return the event composedPath', () => {
    const event = {
      composedPath: () => [
        'dom element 1',
        'dom element 2',
        'dom element 3',
        'dom element 4',
      ],
    };

    expect(getPropagationPath(event)).toHaveLength(4);
  });

  it('return the event path using the polyfill', () => {
    const event = {
      target: {
        nodeName: 'element 1',
        parentElement: {
          nodeName: 'element 2',
          parentElement: {
            nodeName: 'element 3',
            parentElement: null,
          },
        },
      },
    };

    expect(getPropagationPath(event)).toHaveLength(3);
  });
});
