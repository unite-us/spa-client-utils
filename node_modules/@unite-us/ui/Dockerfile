FROM node:10-alpine

ARG NPM_TOKEN

WORKDIR /usr/app

RUN apk add --update \
    git \
    && git config --global url.https://github.com/.insteadOf ssh://git@github.com/

COPY package.json ./

RUN echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > ./.npmrc

RUN npm install

COPY . .
